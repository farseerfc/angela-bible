<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_22) on Fri Dec 17 14:50:23 CST 2010 -->
<TITLE>
org.crosswire.common.config
</TITLE>

<META NAME="keywords" CONTENT="org.crosswire.common.config package">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="org.crosswire.common.config";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="跳过导航链接"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>概述</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>软件包</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">类</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>使用</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>树</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>已过时</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>索引</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>帮助</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/crosswire/common/compress/package-summary.html"><B>上一个软件包</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/crosswire/common/config/swing/package-summary.html"><B>下一个软件包</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/crosswire/common/config/package-summary.html" target="_top"><B>框架</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>无框架</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>所有类</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>所有类</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<H2>
软件包 org.crosswire.common.config
</H2>
Config allows an application to separate the responsibilities of setting
itself up, and providing a user interface from the real work that it needs
to do.
<P>
<B>请参见：</B>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#package_description"><B>描述</B></A>
<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>接口摘要</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/Choice.html" title="org.crosswire.common.config 中的接口">Choice</A></B></TD>
<TD>Choice is the fundamental building block of the config system.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/ConfigListener.html" title="org.crosswire.common.config 中的接口">ConfigListener</A></B></TD>
<TD>ConfigListener.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/MappedChoice.html" title="org.crosswire.common.config 中的接口">MappedChoice&lt;K,V&gt;</A></B></TD>
<TD>MappedChoice is simply a Choice where there are a number of alternative
 options where each entry is a Map.Entry.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/MultipleChoice.html" title="org.crosswire.common.config 中的接口">MultipleChoice</A></B></TD>
<TD>MultipleChoice is simply a Choice where there are a number of alternative
 options.</TD>
</TR>
</TABLE>
&nbsp;

<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>类摘要</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/AbstractReflectedChoice.html" title="org.crosswire.common.config 中的类">AbstractReflectedChoice</A></B></TD>
<TD>A helper for when we need to be a choice created dynamically.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/BooleanChoice.html" title="org.crosswire.common.config 中的类">BooleanChoice</A></B></TD>
<TD>A class to convert between strings and objects of a type.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/ChoiceFactory.html" title="org.crosswire.common.config 中的类">ChoiceFactory</A></B></TD>
<TD>Factory for the well known Choices.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/ClassChoice.html" title="org.crosswire.common.config 中的类">ClassChoice</A></B></TD>
<TD>A class to convert between strings and objects of a type.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/Config.html" title="org.crosswire.common.config 中的类">Config</A></B></TD>
<TD>Config is the core part of the configuration system; it is simply a
 Collection of <code>Choice</code>s.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/ConfigEvent.html" title="org.crosswire.common.config 中的类">ConfigEvent</A></B></TD>
<TD>An event indicating that an exception has happened.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/DirectoryChoice.html" title="org.crosswire.common.config 中的类">DirectoryChoice</A></B></TD>
<TD>A class to convert between strings and objects of a type.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/FileChoice.html" title="org.crosswire.common.config 中的类">FileChoice</A></B></TD>
<TD>A class to convert between files and objects of a type.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/FontChoice.html" title="org.crosswire.common.config 中的类">FontChoice</A></B></TD>
<TD>A class to convert between strings and objects of a type.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/IntOptionsChoice.html" title="org.crosswire.common.config 中的类">IntOptionsChoice</A></B></TD>
<TD>A class to convert between strings and objects of a type.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/MappedOptionsChoice.html" title="org.crosswire.common.config 中的类">MappedOptionsChoice</A></B></TD>
<TD>A class to convert between strings and objects of a type.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/Msg.html" title="org.crosswire.common.config 中的类">Msg</A></B></TD>
<TD>Compile safe Msg resource settings.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/NumberChoice.html" title="org.crosswire.common.config 中的类">NumberChoice</A></B></TD>
<TD>A class to convert between strings and objects of a type.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/PathChoice.html" title="org.crosswire.common.config 中的类">PathChoice</A></B></TD>
<TD>A class to convert between strings and objects of a type.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/StringArrayChoice.html" title="org.crosswire.common.config 中的类">StringArrayChoice</A></B></TD>
<TD>A class to convert between strings and objects of a type.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/StringChoice.html" title="org.crosswire.common.config 中的类">StringChoice</A></B></TD>
<TD>A type of Choice that converts between strings and objects.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/StringOptionsChoice.html" title="org.crosswire.common.config 中的类">StringOptionsChoice</A></B></TD>
<TD>A class to convert between strings and objects of a type.</TD>
</TR>
</TABLE>
&nbsp;

<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>异常摘要</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/ConfigException.html" title="org.crosswire.common.config 中的类">ConfigException</A></B></TD>
<TD>Something went wrong while setting config options.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../../org/crosswire/common/config/StartupException.html" title="org.crosswire.common.config 中的类">StartupException</A></B></TD>
<TD>Something in the startup config files failed to start properly.</TD>
</TR>
</TABLE>
&nbsp;

<P>
<A NAME="package_description"><!-- --></A><H2>
软件包 org.crosswire.common.config 的描述
</H2>

<P>
<p>Config allows an application to separate the responsibilities of setting
itself up, and providing a user interface from the real work that it needs
to do.</p>

<h2>Introduction</h2>
<p>Config is (mostly) all kept in a few packages in the util source tree. The
 design aims for the following goals:</p>
<ul>
  <li>Application Transparency - It should be possible to add a configuration
    dialog to an application without adding hundreds of hooks either to your
    application to read the current state, or to the configuration system to
    work with the application. This is achieved via an xml config file and a
    healthy dose of reflection.</li>
  <li>View Independance - Currently there are a number of Swing front ends -
    a Mozilla style config dialog with a tree, a more conventional tabbed dialog,
    and a prototype wizard style interface. There has also been a servlet front-end
    however the code to do this has suffered bit-rot, and should not be considered
    useful. It does however prove the view independance concept.</li>
</ul>

<h3>How To Use Config</h3>
<p>There are a number of simple steps. First a config.xml file is needed to tell
the config system what to configure and how.</p>

<pre>
&lt;config&gt;

  <span class="comment">&lt;!-- A configuration is a set of options ... --&gt;</span>
  <span class="comment">&lt;!-- The key is a dot separated name - Imaging this in a Mozilla tree or some nested tabs. --&gt;</span>
  &lt;option key=&quot;Bibles.Sword.Base Directory&quot; type=&quot;string&quot;&gt;
    <span class="comment">&lt;!-- The type (above) along with the introspect line configures what JavaBean methods will be called --&gt;</span>
    &lt;introspect class=&quot;org.crosswire.jsword.book.sword.SwordBibleDriver&quot; property=&quot;SwordDir&quot;/&gt;
    <span class="comment">&lt;!-- The tool-tip (or similar) describing what is going on --&gt;</span>
    &lt;help&gt;Where is the SWORD Project base directory.&lt;/help&gt;
  &lt;/option&gt;

  <span class="comment">&lt;!-- Another option, this time it is a boolean option which will show up as a tickbox --&gt;</span>
  &lt;option key=&quot;Bibles.Display.Persistent Naming&quot; level=&quot;advanced&quot; type=&quot;boolean&quot;&gt;
    &lt;introspect class=&quot;org.crosswire.jsword.passage.PassageUtil&quot; property=&quot;PersistentNaming&quot;/&gt;
    &lt;help&gt;True if the passage editor re-writes the references to conform to its notation.&lt;/help&gt;
  &lt;/option&gt;

  <span class="comment">&lt;!-- Another type again this one for the look and feel. --&gt;
  &lt;!-- The reason for the helper class here is to alter windows that are not currently mapped --&gt;</span>
    &lt;option key=&quot;Looks.Look and Feel&quot; type=&quot;class&quot;&gt;
    &lt;introspect class=&quot;org.crosswire.common.swing.LookAndFeelUtil&quot; property=&quot;LookAndFeel&quot;/&gt;
    &lt;help&gt;The look and feel of the application&lt;/help&gt;
  &lt;/option&gt;

  <span class="comment">&lt;!-- When we have have an Enum style config option ... --&gt;</span>
    &lt;option key=&quot;Bibles.Display.Book Case&quot; level=&quot;advanced&quot; type=&quot;int-options&quot;&gt;
    &lt;introspect class=&quot;org.crosswire.jsword.passage.Books&quot; property=&quot;Case&quot;/&gt;
    &lt;help&gt;What case should we use to display the references.&lt;/help&gt;
    &lt;alternative number=&quot;0&quot; name=&quot;lower&quot;/&gt;
    &lt;alternative number=&quot;1&quot; name=&quot;Sentence&quot;/&gt;
    &lt;alternative number=&quot;2&quot; name=&quot;UPPER&quot;/&gt;
    &lt;alternative number=&quot;3&quot; name=&quot;mIXeD&quot;/&gt;
  &lt;/option&gt;

  <span class="comment">&lt;!-- The options here are more complex and need to be provided as a string array by Java code (see below) --&gt;</span>
    &lt;option key=&quot;Bibles.Default&quot; type=&quot;string-options&quot;&gt;
    &lt;introspect class=&quot;org.crosswire.jsword.book.Bibles&quot; property=&quot;DefaultName&quot;/&gt;
    &lt;help&gt;Which of the available Bibles is the default.&lt;/help&gt;
    &lt;map name=&quot;biblenames&quot;/&gt;
  &lt;/option&gt;

  <span class="comment">&lt;!-- This option is 'advanced' which means it is not visible to all users (see below) --&gt;</span>
    &lt;option key=&quot;Advanced.Source Path&quot; level=&quot;advanced&quot; type=&quot;path&quot;&gt;
    &lt;introspect class=&quot;org.crosswire.common.swing.DetailedExceptionPane&quot; property=&quot;SourcePath&quot;/&gt;
    &lt;help&gt;The directories to search for source code in when investigating an exception.&lt;/help&gt;
  &lt;/option&gt;

  <span class="comment">&lt;!-- When the choice is very custom you can always do your own implementation --&gt;
  &lt;!-- This allows us to set users levels so not everyone gets asked hard questions --&gt;</span>
    &lt;option key=&quot;Advanced.User Level&quot; type=&quot;custom&quot; class=&quot;org.crosswire.common.util.UserLevel$UserLevelChoice&quot;&gt;
    &lt;help&gt;How advanced is your knowledge of this program.&lt;/help&gt;
  &lt;/option&gt;

  <span class="comment">&lt;!-- There are other examples in config.xml --&gt;</span>
&lt;/config&gt;
</pre>

<p>Then you need to add the Java code:</p>
<pre><span class="comment">
// To load the config.xml file:
</span>Config config = new Config(&quot;Tool Shed Options&quot;);
Document xmlconfig = Project.resource().getDocument(&quot;config&quot;); <span class="comment">// Or whatever to get a JDOM Document</span>
config.add(xmlconfig);

<span class="comment">// To load a saved config</span>
config.setProperties(Project.resource().getProperties(&quot;desktop&quot;)); <span class="comment">// Or however you get a Properties</span>
config.localToApplication(true);

<span class="comment">// And display it ...</span>
URL configurl = Project.resource().getPropertiesURL(&quot;desktop&quot;); <span class="comment">// URL of the Properties file to save to</span>
SwingConfig.showDialog(config, parentWind, configurl);

<span class="comment">// The code above needed help in setting up a string choice. This is how ...</span>
ChoiceFactory.getDataMap().put(&quot;biblenames&quot;, Bibles.getBibleNames());
</pre>
<p>There are more examples in <code>org.crosswire.bibledesktop.desktop.OptionsAction.</code></p>
<P>

<P>
<DL>
</DL>
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="跳过导航链接"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>概述</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>软件包</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">类</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>使用</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>树</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>已过时</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>索引</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>帮助</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/crosswire/common/compress/package-summary.html"><B>上一个软件包</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/crosswire/common/config/swing/package-summary.html"><B>下一个软件包</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/crosswire/common/config/package-summary.html" target="_top"><B>框架</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>无框架</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>所有类</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>所有类</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
